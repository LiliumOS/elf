# x86_64

## Pointers

Implementations of the ABI are permitted to produce pointers outside of the 48-bit Virtual Address Range, where LA57 is supported and enabled. Processes must not assume that pointers produced by the process have all 0s in the top 17-bits. 

## System (USI) Calling Convention

The Functions exported by the USI obey the system calling convention. 
This is Identical to the Function Calling Sequence specified by Version 1.0 of the [AMD64 Architecture Processor Supplement](https://cs61.seas.harvard.edu/site/2024/pdf/x86-64-abi-20210928.pdf), except:
* No more than 6 parameters appear, 
* No more than one return value appears,
* No parameters of class SSE, SSEUP, X87, X87UP, or COMPLEX_X87 may appear, and
* No return value of class SSE, SSEUP, X87, X87UP, COMPLEX_X87, or MEMORY may appear.

The ILP32 ABI is not supported by the default USI.

## Syscall Calling Convention

System calls are invoked by using the `syscall` with the system function number set in `rax`. The top 32 bits of `rax` must be `0` upon entry to `syscall` or `UNSUPPORTED_SYSTEM_FUNCTION` is returned.

Parameters are passed to a system call according to the System Calling Convention, except:
* The 4th INTEGER eightbyte is passed in `r10` instead of `rcx` and otherwise `r10` is treated as unused (volatile) by the system call,
* The function may not be variadic, and
* No return value longer than 1 eightbyte appears.

## Hardware Exceptions

Exceptions generated by the hardware may generate synchronous exceptions on the current thread. The correspondance 